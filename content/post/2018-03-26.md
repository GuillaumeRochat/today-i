+++
date = "2018-03-26T18:04:57+00:00"
title = "System Monitoring"

+++
... spent some time searching monitoring tools. It all started when I searched for a replacement for [htop](https://hisham.hm/htop/). It's not that htop isn't nice, it's because I was thinking about which tools I use that require me to use function keys. I have been looking at [60% keyboards](https://deskthority.net/wiki/60%25) and need to know whether I can fully function with that form factor. In terms of video games, I can create new shortcuts, I barely use the function keys for these anyway. For the escape key, I'm already working on using caps lock for that. Htop is one of those that I would need function keys for.

Long story short, I found [Glances](https://nicolargo.github.io/glances/), an open source alternative to htop. It doesn't do all the same things htop does. You can't kill a process straight from it for instance. But in terms of system monitoring, it's miles ahead. Some of the features are the integrated censors for CPU or GPU temps, the file system space monitoring, the network monitoring, the alerting, and even the containers monitoring. Yes, containers monitoring.

What it does for the containers is that it displays all the currently up containers in a different section. It's basically what you'd get from querying Docker, but with some extra stuff. You can see the I/O, the memory usage, the CPU usage, etc. It makes it very easy to monitor containers and diagnose applications running in containers as if they were just applications on the host. Even better, they display the Docker processes in the tasks list, meaning you can see the actual commands the containers are running.

Another thing that is really impressive is the server mode. It means you can fire it on a server and then remotely open Glances for that server remotely. You can also watch it over web, as it has a webview. But the nicest thing regarding server monitoring is the fact that it handles exporting data to many different services. For instance, you could push the data to an InfluxDB and then watch the status overtime with Grafana. Or you could record every events in Elasticsearch, or push the data in Cassandra. 

That could be useful when added with a full suite of monitoring tools, such as sending data over to Telegraf, an agent that collects metrics from anywhere to writes down everything in a sensible way in InfluxDB. It's part of the TICK stack (Telegraf, InfluxDB, Chronograf, Kapacitor) developped by InfluxData. Glances seems to do a part of what Telegraf does, as it aggregates different sources of information to display, but Telegraf works on each agent and then sends the data to a single endpoint that handles everything from there. I could be a strong addition to send data from each host to Telegraf to then see everything there is to see in Chronograf or whatever front end put over InfluxDB.

In terms of monitoring tools, there is plenty available, so the issue isn't really about getting the data. The issue is mostly about getting the right data at the right place and at the right time. Glances seems to be an interesting tool to get a quick overview of the whole system without having to code each independent checks. I assume you'd then add details manually where needed until Glances has been entirely replaced, but until then it seems enough to start.