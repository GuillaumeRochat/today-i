+++
date = "2018-03-07T18:35:52+00:00"
title = "Yarn Gems"

+++
... actually didn't learn much, sadly. What I want to remember from my searches today is about [yarn](https://yarnpkg.com/en/), the javascript package manager built by Facebook. It appeared at a moment when [npm](https://www.npmjs.com/) wasn't up to the task, cross dependencies were breaking builds, making them unpredictable. Now, npm included many of the changes that yarn brought, such as the lock files. They also improved some design choices and the updates/installs of packages are much faster. Nevertheless, I still prefer yarn over npm. I found about a few commands today that I never thought I'd need but are actually useful.

The first is "licenses". It makes it possible to list all the licenses of all the dependencies of a project. Rather than outputting it with the licenses of each dependency, it lists all the different licenses with the projects having them. It makes it easy to quickly search and see any unwanted license type in the repository such as GPL for closed source software. Since there is no easy way to prevent such installation, and we are always only one command away from adding a dependency, it's easy to make a mistake. This way we can watch for it. A nice update would be to add a sort of prevention. When you can't use GPL, blacklist that license to prevent install of GPL packages to work. It would require the standardization of the license string in the package.json files though, which isn't the case at the moment. We can dream.

The next command is "version". We'd expect that command to simply output the current yarn version, but as it turns out it actually increases the version of the current package. It even adds a git tag if its with a git repository. Isn't that great? After all, we constantly update that version in the package.json, but we always edit it manually or add external libraries to do that for us with the tag and push and what not. Building it straight into the package manager makes sens and will probably help making the semver more meaningful and followed.

The next command that seems interesting is "why". As stupid as it might seem, it sometimes happen that a dependency is used but we wonder where it actually comes from. Or that we see a dependency in the node_modules but don't know what installed it. Even, when we find a GPL dependency that is actually a dependency of a dependency, we can then find the culprit of the issue and fix it more easily.

It might seem not much to some, but it's some of the things that I like seeing in such a tool. It is always helpful and with the open source model it is ruled with, yarn can include very nice little commands that wouldn't be built in a non open source scenario, for lack of necessity given the budget.